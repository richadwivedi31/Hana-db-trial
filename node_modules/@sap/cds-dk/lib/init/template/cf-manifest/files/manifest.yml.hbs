# Generated manifest.yml based on template version 0.1.0
# appName = {{cap.appName}}
# language={{cap.pLanguage}}
# multitenancy={{cap.isMultitenant}}
---
applications:
# -----------------------------------------------------------------------------------
# Backend Service
# -----------------------------------------------------------------------------------
- name: {{cap.appName}}-{{cap.srv.name}}
  random-route: true  # for development only
{{#cap.isNodejs}}
  path: {{& cap.srv.path}}
  memory: 256M
  buildpack: nodejs_buildpack
{{/cap.isNodejs}}
{{#cap.isJava}}
  path: {{& cap.srv.path}}/target/{{cap.srv.ext.archiveName}}
  memory: 1G
  disk_quota: 512M
  env:
    SPRING_PROFILES_ACTIVE: cloud
  buildpack: java_buildpack
{{/cap.isJava}}
{{#cap.hasRequires}}
  services:
{{#cap.requires}}
{{#resource.isHana}}
  - {{resource.name}}
{{/resource.isHana}}
{{#resource.isXsuaa}}
  - {{resource.name}}
{{/resource.isXsuaa}}
{{/cap.requires}}
{{/cap.hasRequires}}

{{#cap.needsSidecar}}
# -----------------------------------------------------------------------------------
# HANA Database Content Deployer App
# -----------------------------------------------------------------------------------
- name: {{cap.appName}}-{{cap.db.0.name}}-deployer
  path: {{& cap.db.0.path}}
  no-route: true
  health-check-type: process
  memory: 256M
  instances: 1
  buildpack: nodejs_buildpack
{{#cap.hasRequires}}
  services:
{{#cap.requires}}
{{#resource.isHana}}
  - {{resource.name}}
{{/resource.isHana}}
{{/cap.requires}}
{{/cap.hasRequires}}
{{/cap.needsSidecar}}
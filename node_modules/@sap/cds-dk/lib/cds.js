const _local = id => require(_resolve(id))

/** @type { import('@sap/cds/lib') } */
const cds = module.exports = _local ('@sap/cds')

// for internal use in cds-dk only
cds._log = _local ('@sap/cds/bin/utils/log')
cds._local = _local

function _resolve (id) {
  return require.resolve (id, {paths:[
    process.cwd(), // project-local module is preferred
    __dirname      // otherwise from our own dependencies
  ]})
}
